
### abstract

这是一个兴趣使然的网络爬虫，给没法早起的我自己

### 实现目标

- 在服务器上运行的脚本，每天7：55唤醒（需要守护进程）

- 在手机/远程PC上运行的服务端，用来发送给服务器想要存的东西
    - 存贴模式是多选，包括输入贴号和关键字存贴
    - 输入贴号：当天输入的99帖子号码，后一天7：55唤醒之后会被存取（如果存在的话）
    - 关键字存贴：当天输入的帖子关键字，后一天7：55唤醒之后会被存取（当天可以搜索到关键字的帖子）

### 文件结构
```
.
├── README.md
├── server_daemon.sh
├── config
├── output
├── log
├── temp
├── lib
│   ├── config.py
│   ├── fetch_post.py
│   └── logger.py
└── tool
    ├── _init_paths.py
    ├── server.py
    └── launcher.py
```

`launcher.py`: 服务器存贴脚本入口

`server.py`: 服务器接收网络消息的脚本

`server_daemon.sh` : 守护进程shell文件（施工中）

`log/`: log文件存放

`output/`: 存储帖子的位置，存储格式是markdown（暂时），path格式是`output/日期/帖标题`

`temp/`: 移动端当日发送到服务器端的请求会被存储在temp文件夹，等待日清前读取


### 注意事项

- 守护进程

本脚本最重要的部分。

使用守护进程在规定时间执行存贴任务。

你需要一台
crontab -e

- 时间

99的日清在东八区早上八点，因为是做给自己的所以设置读取时间不是用东八区时间，而是local time。
如果是在非东八区时钟的终端使用会出问题，唯一的方法是改终端时间。

如果是mac OS或者windows，在时钟设置中修改。如果是linux，在`~/.bashrc`中加入：
`TZ='Asia/Shanghai'; export TZ`即可将系统时间修改为东八区。

- 保存名称

在linux系统中会出现标题名长度限制，目前长度设置为50个字符。

- 搜索tag的方法

再次，因为是做给自己的，只弄了使用帖子标题搜索的方法。

